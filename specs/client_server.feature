Feature: MCPクライアントとサーバー
  開発者として
  MCPクライアントとサーバーを使用したい
  接続を確立してメッセージをやり取りするため

  Scenario: サーバーの初期化
    Given 名前とバージョンを持つサーバー構成がある
    When 新しいサーバーインスタンスを作成する
    Then サーバーは構成で初期化されるべき
    And サーバーは指定された機能を持つべき

  Scenario: サーバーをトランスポートに接続
    Given サーバーインスタンスがある
    And トランスポートインスタンスがある
    When サーバーをトランスポートに接続する
    Then サーバーはメッセージの処理を開始すべき
    And サーバーはリクエストを処理する準備ができているべき

  Scenario: クライアントの初期化
    Given クライアント構成がある
    When 新しいクライアントインスタンスを作成する
    Then クライアントは構成で初期化されるべき

  Scenario: クライアントをサーバーに接続
    Given クライアントインスタンスがある
    And トランスポートインスタンスがある
    When クライアントをトランスポートに接続する
    Then クライアントは初期化リクエストを送信すべき
    And クライアントは初期化レスポンスを受信すべき
    And クライアントは初期化済み通知を送信すべき
    And クライアントはメッセージをやり取りする準備ができているべき

  Scenario: クライアント-サーバーのリクエスト-レスポンスサイクル
    Given 接続されたクライアントとサーバーがある
    When クライアントがサーバーにリクエストを送信する
    Then サーバーはリクエストを処理すべき
    And サーバーはレスポンスを送信すべき
    And クライアントはレスポンスを受信すべき
